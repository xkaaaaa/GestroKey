# GestroKey - 隐绘助手

---

## 项目简介

GestroKey（隐绘助手）是一个基于手势识别的快捷操作工具，通过按住右键绘制特定手势来快速执行各种操作。它可以帮助用户提高工作效率，实现快速、隐蔽的操作控制。

## 主要功能

- **手势识别**：支持多种自定义手势绘制和识别
- **快捷操作**：通过手势快速执行各种系统操作
- **丝滑体验**：优化的绘制算法，提供流畅的绘制体验
- **简洁界面**：直观的用户界面和系统托盘支持
- **自定义配置**：通过settings.json文件配置手势和行为

## 安装与使用

1. 克隆本项目
   
   ```bash
   git clone https://github.com/xkaaaaa/GestroKey.git
   ```

2. 安装依赖
   
   ```bash
   pip install -r requirements.txt
   ```

3. 运行程序
   
   ```bash
   python src/main.py
   ```

## 使用方法

1. 启动程序后，将显示简洁的控制界面
2. 点击"开始绘画"按钮激活手势识别功能
3. 按住鼠标右键，在屏幕上绘制手势
4. 释放鼠标右键后，系统将识别手势并执行对应操作
5. 程序可最小化到系统托盘继续运行

## 自定义配置

编辑`settings.json`文件可以配置：
- 笔触参数（颜色、宽度等）
- 自定义手势及对应操作
- 性能相关参数

## 项目文件结构

```
GestroKey/
├── src/                        # 源代码目录
│   ├── main.py                 # 程序入口点和主窗口管理
│   ├── app/                    # 应用核心模块
│   │   ├── ink_painter.py      # 绘画模块，处理屏幕绘制和线条渲染
│   │   ├── gesture_parser.py   # 手势解析器，识别用户绘制的手势
│   │   ├── log.py              # 日志系统，记录程序运行状态
│   │   ├── web_server.py       # Web服务器模块，提供API接口
│   │   └── ui/                 # 用户界面资源
│   │       ├── static/         # 静态资源（CSS、JS、图片）
│   │       │   ├── css/        # 样式表文件
│   │       │   ├── js/         # JavaScript脚本
│   │       │   └── img/        # 图像资源
│   │       └── templates/      # HTML模板
│   └── utils/                  # 实用工具模块
│       └── helpers.py          # 辅助函数集合
├── settings.json               # 配置文件，存储用户设置和手势
├── requirements.txt            # 项目依赖列表
├── LICENSE                     # 开源许可证文件
└── README.md                   # 项目说明文档（当前文件）
```

### 核心组件说明

- **main.py**: 程序的主入口点，负责初始化应用程序、创建主窗口、系统托盘集成和启动各个模块。

- **ink_painter.py**: 绘画核心模块，使用PyQt5实现透明画布覆盖整个屏幕，处理鼠标事件、线条平滑渲染和渐隐动画效果。同时负责接收手势绘制并提交给手势解析器处理。主要特点：
  - 多进程架构，分离绘制和手势识别
  - 高性能线条渲染和平滑算法
  - 动态线宽调整（根据绘制速度）
  - 线条渐隐动画效果

- **gesture_parser.py**: 手势识别模块，分析用户绘制的轨迹，将其转换为方向序列，并匹配预定义的手势模式。能够处理多种复杂手势并允许用户自定义。

- **web_server.py**: 提供基于Flask的web服务器，用于应用程序的操作界面，允许用户通过网页控制应用程序和配置手势。

- **log.py**: 统一的日志处理模块，提供不同级别的日志记录，帮助调试和追踪程序运行状态。

- **settings.json**: 配置文件，存储用户的各种设置，包括：
  - 绘画参数（线条颜色、宽度、渐隐时间等）
  - 手势定义和对应执行的命令
  - 性能和外观相关设置

## 许可证

本项目采用 GNUv3 许可证，详情请参阅 LICENSE 文件。